(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4381],{19396:function(e,t,r){Promise.resolve().then(r.bind(r,29500))},71774:function(e,t,r){"use strict";var s=Object.defineProperty,n=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,i=Object.prototype.hasOwnProperty,o=(e,t,r)=>new Promise((s,n)=>{var a=e=>{try{o(r.next(e))}catch(e){n(e)}},i=e=>{try{o(r.throw(e))}catch(e){n(e)}},o=e=>e.done?s(e.value):Promise.resolve(e.value).then(a,i);o((r=r.apply(e,t)).next())}),l={};((e,t)=>{for(var r in t)s(e,r,{get:t[r],enumerable:!0})})(l,{SessionContextProvider:()=>f,useSession:()=>x,useSessionContext:()=>h,useSupabaseClient:()=>m,useUser:()=>p}),e.exports=((e,t,r,o)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let l of a(t))i.call(e,l)||l===r||s(e,l,{get:()=>t[l],enumerable:!(o=n(t,l))||o.enumerable});return e})(s({},"__esModule",{value:!0}),l);var u=r(2265),c=r(57437),d=(0,u.createContext)({isLoading:!0,session:null,error:null,supabaseClient:{}}),f=({supabaseClient:e,initialSession:t=null,children:r})=>{let[s,n]=(0,u.useState)(t),[a,i]=(0,u.useState)(!t),[l,f]=(0,u.useState)();(0,u.useEffect)(()=>{!s&&t&&n(t)},[s,t]),(0,u.useEffect)(()=>{let t=!0;return function(){o(this,null,function*(){let{data:{session:r},error:s}=yield e.auth.getSession();if(t){if(s){f(s),i(!1);return}n(r),i(!1)}})}(),()=>{t=!1}},[]),(0,u.useEffect)(()=>{let{data:{subscription:t}}=e.auth.onAuthStateChange((e,t)=>{t&&("SIGNED_IN"===e||"TOKEN_REFRESHED"===e||"USER_UPDATED"===e)&&n(t),"SIGNED_OUT"===e&&n(null)});return()=>{t.unsubscribe()}},[]);let h=(0,u.useMemo)(()=>a?{isLoading:!0,session:null,error:null,supabaseClient:e}:l?{isLoading:!1,session:null,error:l,supabaseClient:e}:{isLoading:!1,session:s,error:null,supabaseClient:e},[a,s,l]);return(0,c.jsx)(d.Provider,{value:h,children:r})},h=()=>{let e=(0,u.useContext)(d);if(void 0===e)throw Error("useSessionContext must be used within a SessionContextProvider.");return e};function m(){let e=(0,u.useContext)(d);if(void 0===e)throw Error("useSupabaseClient must be used within a SessionContextProvider.");return e.supabaseClient}var x=()=>{let e=(0,u.useContext)(d);if(void 0===e)throw Error("useSession must be used within a SessionContextProvider.");return e.session},p=()=>{var e,t;let r=(0,u.useContext)(d);if(void 0===r)throw Error("useUser must be used within a SessionContextProvider.");return null!=(t=null==(e=r.session)?void 0:e.user)?t:null}},41671:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(79205).Z)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},51817:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(79205).Z)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},99376:function(e,t,r){"use strict";var s=r(35475);r.o(s,"useParams")&&r.d(t,{useParams:function(){return s.useParams}}),r.o(s,"usePathname")&&r.d(t,{usePathname:function(){return s.usePathname}}),r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}}),r.o(s,"useSearchParams")&&r.d(t,{useSearchParams:function(){return s.useSearchParams}})},29500:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return N}});var s=r(57437),n=r(2265),a=r(99376),i=r(71774);let o=(0,r(79205).Z)("brain-circuit",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M9 13a4.5 4.5 0 0 0 3-4",key:"10igwf"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M12 13h4",key:"1ku699"}],["path",{d:"M12 18h6a2 2 0 0 1 2 2v1",key:"105ag5"}],["path",{d:"M12 8h8",key:"1lhi5i"}],["path",{d:"M16 8V5a2 2 0 0 1 2-2",key:"u6izg6"}],["circle",{cx:"16",cy:"13",r:".5",key:"ry7gng"}],["circle",{cx:"18",cy:"3",r:".5",key:"1aiba7"}],["circle",{cx:"20",cy:"21",r:".5",key:"yhc1fs"}],["circle",{cx:"20",cy:"8",r:".5",key:"1e43v0"}]]);var l=r(41671),u=r(51817),c=r(67506),d=r(34169),f=r(40477),h=r(79820),m=r(69174),x=r(12381),p=r(93448),g=r(22549);let v=(e,t)=>{if(!t||0===t.length)return"Unknown";let r=t.find(t=>e>=t.min&&e<=t.max);return r?r.label:"Unknown"},y=e=>{let t=e.toLowerCase();return t.includes("severe")||t.includes("गंभीर")?"bg-red-600/80 border-red-500 text-white":t.includes("moderate")||t.includes("मध्यम")?"bg-yellow-500/80 border-yellow-400 text-black":t.includes("mild")||t.includes("minimal")||t.includes("हल्का")||t.includes("न्यूनतम")?"bg-green-600/80 border-green-500 text-white":"bg-gray-500/80 border-gray-400 text-white"},b=()=>(0,s.jsx)(g.UQ,{type:"single",collapsible:!0,className:"w-full",children:(0,s.jsxs)(g.Qd,{value:"item-1",className:"border-gray-700",children:[(0,s.jsx)(g.o4,{className:"text-white hover:no-underline",children:"How is this scored?"}),(0,s.jsx)(g.vF,{children:(0,s.jsx)("p",{className:"text-gray-400",children:"Each answer has a value from 0 (Not at all) to 3 (Nearly every day). The total score is the sum of the values for all questions. This score is then used to determine the severity level (e.g., Minimal, Mild, Moderate, or Severe). This is a standard screening tool and not a formal diagnosis."})})]})});function w(e){let{testType:t,severityKey:r}=e,{t:n}=(0,c.$G)("suggestions"),a=n("".concat(t.toLowerCase(),".").concat(r.toLowerCase()),{returnObjects:!0});return a&&a.title?(0,s.jsxs)(h.Zb,{className:"bg-gray-900/50 border-purple-500/20",children:[(0,s.jsxs)(h.Ol,{children:[(0,s.jsxs)(h.ll,{className:"flex items-center gap-2 text-white",children:[(0,s.jsx)(o,{className:"h-6 w-6 text-purple-400"}),a.title]}),(0,s.jsx)(h.SZ,{className:"text-gray-400 pt-2",children:a.summary})]}),(0,s.jsx)(h.aY,{className:"space-y-3 text-gray-300",children:a.points.map((e,t)=>(0,s.jsxs)("div",{className:"flex items-start gap-3",children:[(0,s.jsx)(l.Z,{className:"h-5 w-5 text-green-400 mt-1 flex-shrink-0"}),(0,s.jsx)("p",{className:"text-sm",children:e})]},t))})]}):null}function j(){let e=(0,a.useRouter)(),t=(0,a.useSearchParams)(),{addResult:r}=(0,f.a)(),o=(0,i.useSession)(),l=t.get("testType"),g=t.get("score"),j=t.get("lang"),N=g?parseInt(g,10):null,{t:S,i18n:k}=(0,c.$G)(null==l?void 0:l.toLowerCase()),[C,P]=(0,n.useState)(!1);(0,n.useEffect)(()=>{let e=j||"en";k.language!==e&&k.changeLanguage(e)},[j,k]),(0,n.useEffect)(()=>{k.isInitialized&&l&&k.hasResourceBundle(k.language,l.toLowerCase())&&P(!0)},[k.isInitialized,k.language,l,k]);let{scoreRanges:E,severityLabels:R,title:O}=(0,n.useMemo)(()=>C?{scoreRanges:S("scoreRanges",{returnObjects:!0}),severityLabels:S("severityLevels",{returnObjects:!0}),title:S("title")}:{scoreRanges:[],severityLabels:{},title:"Test"},[S,C]),M=(0,n.useMemo)(()=>null===N?"Unknown":v(N,E),[N,E]),_=R[M]||M;return((0,n.useEffect)(()=>{var e;if(l&&null!==N&&"Unknown"!==M&&(null==o?void 0:null===(e=o.user)||void 0===e?void 0:e.id)){let e=localStorage.getItem("screening_answers");if(e){let t=JSON.parse(e),s={userId:o.user.id,test_type:l,score:N,severity:M,answers:t};fetch("http://127.0.0.1:5001/api/test-submission",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}).catch(e=>console.error("Failed to save test submission:",e)),r(s),localStorage.removeItem("screening_answers")}}},[l,N,M,r,o]),C&&null!==N&&l)?(0,s.jsxs)(d.E.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.7},className:"w-full max-w-3xl mx-auto space-y-8",children:[(0,s.jsxs)(h.Zb,{className:"bg-gray-900/50 border-purple-500/20 text-center",children:[(0,s.jsxs)(h.Ol,{children:[(0,s.jsxs)(h.ll,{className:"text-3xl text-white",children:["Your ",O," Result"]}),(0,s.jsx)(h.SZ,{className:"text-gray-400",children:"This is a snapshot, not a diagnosis. It can be a helpful starting point for a conversation."})]}),(0,s.jsxs)(h.aY,{className:"space-y-4",children:[(0,s.jsx)("p",{className:"text-gray-400",children:"Your Score"}),(0,s.jsx)("p",{className:"text-8xl font-bold text-purple-400",children:N}),(0,s.jsx)(m.C,{className:(0,p.cn)("mt-2 text-xl py-1 px-4 border",y(_)),children:_})]})]}),(0,s.jsx)(w,{testType:l,severityKey:M}),(0,s.jsx)(b,{}),(0,s.jsx)("div",{className:"text-center",children:(0,s.jsx)(x.z,{variant:"outline",onClick:()=>e.push("/self-check"),children:"Take Another Test"})})]}):(0,s.jsx)("div",{className:"flex justify-center items-center min-h-[50vh]",children:(0,s.jsx)(u.Z,{className:"h-12 w-12 animate-spin text-purple-400"})})}function N(){return(0,s.jsx)("div",{className:"container mx-auto py-24 sm:py-32",children:(0,s.jsx)(n.Suspense,{fallback:(0,s.jsx)("div",{className:"flex justify-center items-center min-h-[50vh]",children:(0,s.jsx)(u.Z,{className:"h-12 w-12 animate-spin text-purple-400"})}),children:(0,s.jsx)(j,{})})})}},22549:function(e,t,r){"use strict";r.d(t,{Qd:function(){return u},UQ:function(){return l},o4:function(){return c},vF:function(){return d}});var s=r(57437),n=r(2265),a=r(13134),i=r(40875),o=r(93448);let l=a.fC,u=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)(a.ck,{ref:t,className:(0,o.cn)("border-b",r),...n})});u.displayName="AccordionItem";let c=n.forwardRef((e,t)=>{let{className:r,children:n,...l}=e;return(0,s.jsx)(a.h4,{className:"flex",children:(0,s.jsxs)(a.xz,{ref:t,className:(0,o.cn)("flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",r),...l,children:[n,(0,s.jsx)(i.Z,{className:"h-4 w-4 shrink-0 transition-transform duration-200"})]})})});c.displayName=a.xz.displayName;let d=n.forwardRef((e,t)=>{let{className:r,children:n,...i}=e;return(0,s.jsx)(a.VY,{ref:t,className:(0,o.cn)("overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",r),...i,children:(0,s.jsx)("div",{className:"pb-4 pt-0",children:n})})});d.displayName=a.VY.displayName},69174:function(e,t,r){"use strict";r.d(t,{C:function(){return o}});var s=r(57437);r(2265);var n=r(90535),a=r(93448);let i=(0,n.j)("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function o(e){let{className:t,variant:r,...n}=e;return(0,s.jsx)("div",{className:(0,a.cn)(i({variant:r}),t),...n})}},12381:function(e,t,r){"use strict";r.d(t,{d:function(){return l},z:function(){return u}});var s=r(57437),n=r(2265),a=r(37053),i=r(90535),o=r(93448);let l=(0,i.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),u=n.forwardRef((e,t)=>{let{className:r,variant:n,size:i,asChild:u=!1,...c}=e,d=u?a.g7:"button";return(0,s.jsx)(d,{className:(0,o.cn)(l({variant:n,size:i,className:r})),ref:t,...c})});u.displayName="Button"},79820:function(e,t,r){"use strict";r.d(t,{Ol:function(){return o},SZ:function(){return u},Zb:function(){return i},aY:function(){return c},eW:function(){return d},ll:function(){return l}});var s=r(57437),n=r(2265),a=r(93448);let i=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,a.cn)("rounded-xl border bg-card text-card-foreground shadow",r),...n})});i.displayName="Card";let o=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,a.cn)("flex flex-col space-y-1.5 p-6",r),...n})});o.displayName="CardHeader";let l=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,a.cn)("font-semibold leading-none tracking-tight",r),...n})});l.displayName="CardTitle";let u=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,a.cn)("text-sm text-muted-foreground",r),...n})});u.displayName="CardDescription";let c=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,a.cn)("p-6 pt-0",r),...n})});c.displayName="CardContent";let d=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,a.cn)("flex items-center p-6 pt-0",r),...n})});d.displayName="CardFooter"},40477:function(e,t,r){"use strict";r.d(t,{G:function(){return i},a:function(){return o}});var s=r(57437),n=r(2265);let a=(0,n.createContext)(void 0),i=e=>{let{children:t}=e,[r,i]=(0,n.useState)([]);return(0,n.useEffect)(()=>{try{let e=localStorage.getItem("calm-nest-results");e&&i(JSON.parse(e))}catch(e){console.error("Failed to load results from localStorage",e)}},[]),(0,n.useEffect)(()=>{try{localStorage.setItem("calm-nest-results",JSON.stringify(r))}catch(e){console.error("Failed to save results to localStorage",e)}},[r]),(0,s.jsx)(a.Provider,{value:{results:r,addResult:e=>{i(t=>[...t,e])}},children:t})},o=()=>{let e=(0,n.useContext)(a);if(void 0===e)throw Error("useResults must be used within a ResultsProvider");return e}},93448:function(e,t,r){"use strict";r.d(t,{cn:function(){return a}});var s=r(61994),n=r(53335);function a(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,n.m6)((0,s.W)(t))}}},function(e){e.O(0,[5569,9452,7506,4169,1860,2971,2117,1744],function(){return e(e.s=19396)}),_N_E=e.O()}]);