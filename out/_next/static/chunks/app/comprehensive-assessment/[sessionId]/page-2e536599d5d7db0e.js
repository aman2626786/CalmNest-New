(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[524],{23324:function(e,s,t){Promise.resolve().then(t.bind(t,57611))},57611:function(e,s,t){"use strict";t.d(s,{default:function(){return V}});var a=t(57437),r=t(2265),n=t(99376),i=t(71774),l=t(34169),o=t(79820),c=t(12381),d=t(7204),m=t(42488),u=t(64972),p=t(88997),x=t(53581),h=t(96215),y=t(41671),g=t(51817),f=t(78867),j=t(92735),b=t(32660),v=t(91723),N=t(76858),w=t(29501),S=t(45701),A=t(67119),C=t(67506),M=t(86700),E=t(80670);let I=(e,s)=>e<=4?s("severityLevels.none_minimal","None-Minimal"):e<=9?s("severityLevels.mild","Mild"):e<=14?s("severityLevels.moderate","Moderate"):e<=19?s("severityLevels.moderately_severe","Moderately Severe"):s("severityLevels.severe","Severe");function O(e){let{onComplete:s,onNext:t}=e,{t:n,i18n:i}=(0,C.$G)("phq9"),[l,d]=(0,r.useState)(!1),[m,p]=(0,r.useState)(!1),x=(0,r.useMemo)(()=>{if(!m)return[];let e=n("questions",{returnObjects:!0});return Array.isArray(e)?e:[]},[n,m]),h=(0,r.useMemo)(()=>m?n("options",{returnObjects:!0}):{},[n,m]);(0,r.useEffect)(()=>{i.isInitialized&&i.hasResourceBundle(i.language,"phq9")&&p(!0)},[i.isInitialized,i.language,i]);let y=(0,r.useMemo)(()=>{if(0===x.length)return A.Ry({});let e=Object.fromEntries(x.map(e=>[e.id,A.Z_().nonempty("Please select an answer.")]));return A.Ry(e)},[x]),f=(0,w.cI)({resolver:(0,S.F)(y),defaultValues:{}}),j=async e=>{d(!0);try{let a=Object.entries(e).map(e=>{let[s,t]=e,a=x.find(e=>e.id===s),r=h[t];return{question:a?a.text:"",option:r||"",score:parseInt(t,10)}}),r=a.reduce((e,s)=>e+s.score,0),i=I(r,n);s({score:r,severity:i,answers:a}),setTimeout(()=>{t()},1e3)}catch(e){console.error("Error submitting PHQ-9:",e)}finally{d(!1)}};return m&&0!==x.length?(0,a.jsx)("div",{className:"space-y-6",children:(0,a.jsxs)(o.Zb,{className:"bg-gray-800 border-gray-700",children:[(0,a.jsxs)(o.Ol,{children:[(0,a.jsxs)(o.ll,{className:"flex items-center gap-3 text-white",children:[(0,a.jsx)(u.Z,{className:"w-6 h-6 text-purple-400"}),n("title","PHQ-9 Depression Screening")]}),(0,a.jsx)(o.SZ,{children:n("description","Over the last 2 weeks, how often have you been bothered by any of the following problems?")})]}),(0,a.jsx)(o.aY,{children:(0,a.jsx)(E.l0,{...f,children:(0,a.jsxs)("form",{onSubmit:f.handleSubmit(j),className:"space-y-6",children:[x.map((e,s)=>(0,a.jsx)(E.Wi,{control:f.control,name:e.id,render:t=>{let{field:r}=t;return(0,a.jsxs)(E.xJ,{className:"space-y-3 p-4 rounded-lg border border-gray-600/50 bg-gray-700/30",children:[(0,a.jsxs)(E.lX,{className:"text-base text-white font-medium",children:[s+1,". ",e.text]}),(0,a.jsx)(E.NI,{children:(0,a.jsx)(M.E,{onValueChange:r.onChange,defaultValue:r.value,className:"flex flex-col space-y-2 pt-2",children:Object.entries(h).map(e=>{let[s,t]=e;return(0,a.jsxs)(E.xJ,{className:"flex items-center space-x-3 space-y-0",children:[(0,a.jsx)(E.NI,{children:(0,a.jsx)(M.m,{value:s,id:"".concat(r.name,"-").concat(s),className:"text-purple-400 border-gray-500 focus:ring-purple-500"})}),(0,a.jsx)(E.lX,{htmlFor:"".concat(r.name,"-").concat(s),className:"font-normal text-gray-300 cursor-pointer",children:t})]},s)})})}),(0,a.jsx)(E.zG,{className:"text-red-400"})]})}},e.id)),(0,a.jsx)("div",{className:"pt-6",children:(0,a.jsx)(c.z,{type:"submit",disabled:l,className:"w-full bg-purple-600 hover:bg-purple-700 text-white py-3",children:l?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(g.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Processing Results..."]}):n("completeButton","Complete PHQ-9 Assessment")})})]})})})]})}):(0,a.jsx)("div",{className:"flex justify-center items-center min-h-[400px]",children:(0,a.jsx)(g.Z,{className:"h-12 w-12 animate-spin text-purple-400"})})}let P=(e,s)=>e<=4?s("severityLevels.minimal","Minimal Anxiety"):e<=9?s("severityLevels.mild","Mild Anxiety"):e<=14?s("severityLevels.moderate","Moderate Anxiety"):s("severityLevels.severe","Severe Anxiety");function R(e){let{onComplete:s,onNext:t}=e,{t:n,i18n:i}=(0,C.$G)("gad7"),[l,d]=(0,r.useState)(!1),[m,u]=(0,r.useState)(!1),x=(0,r.useMemo)(()=>{if(!m)return[];let e=n("questions",{returnObjects:!0});return Array.isArray(e)?e:[]},[n,m]),h=(0,r.useMemo)(()=>m?n("options",{returnObjects:!0}):{},[n,m]);(0,r.useEffect)(()=>{i.isInitialized&&i.hasResourceBundle(i.language,"gad7")&&u(!0)},[i.isInitialized,i.language,i]);let y=(0,r.useMemo)(()=>{if(0===x.length)return A.Ry({});let e=Object.fromEntries(x.map(e=>[e.id,A.Z_().nonempty("Please select an answer.")]));return A.Ry(e)},[x]),f=(0,w.cI)({resolver:(0,S.F)(y),defaultValues:{}}),j=async e=>{d(!0);try{let a=Object.entries(e).map(e=>{let[s,t]=e,a=x.find(e=>e.id===s),r=h[t];return{question:a?a.text:"",option:r||"",score:parseInt(t,10)}}),r=a.reduce((e,s)=>e+s.score,0),i=P(r,n);s({score:r,severity:i,answers:a}),setTimeout(()=>{t()},1e3)}catch(e){console.error("Error submitting GAD-7:",e)}finally{d(!1)}};return m&&0!==x.length?(0,a.jsx)("div",{className:"space-y-6",children:(0,a.jsxs)(o.Zb,{className:"bg-gray-800 border-gray-700",children:[(0,a.jsxs)(o.Ol,{children:[(0,a.jsxs)(o.ll,{className:"flex items-center gap-3 text-white",children:[(0,a.jsx)(p.Z,{className:"w-6 h-6 text-blue-400"}),n("title","GAD-7 Anxiety Screening")]}),(0,a.jsx)(o.SZ,{children:n("description","Over the last 2 weeks, how often have you been bothered by any of the following problems?")})]}),(0,a.jsx)(o.aY,{children:(0,a.jsx)(E.l0,{...f,children:(0,a.jsxs)("form",{onSubmit:f.handleSubmit(j),className:"space-y-6",children:[x.map((e,s)=>(0,a.jsx)(E.Wi,{control:f.control,name:e.id,render:t=>{let{field:r}=t;return(0,a.jsxs)(E.xJ,{className:"space-y-3 p-4 rounded-lg border border-gray-600/50 bg-gray-700/30",children:[(0,a.jsxs)(E.lX,{className:"text-base text-white font-medium",children:[s+1,". ",e.text]}),(0,a.jsx)(E.NI,{children:(0,a.jsx)(M.E,{onValueChange:r.onChange,defaultValue:r.value,className:"flex flex-col space-y-2 pt-2",children:Object.entries(h).map(e=>{let[s,t]=e;return(0,a.jsxs)(E.xJ,{className:"flex items-center space-x-3 space-y-0",children:[(0,a.jsx)(E.NI,{children:(0,a.jsx)(M.m,{value:s,id:"".concat(r.name,"-").concat(s),className:"text-blue-400 border-gray-500 focus:ring-blue-500"})}),(0,a.jsx)(E.lX,{htmlFor:"".concat(r.name,"-").concat(s),className:"font-normal text-gray-300 cursor-pointer",children:t})]},s)})})}),(0,a.jsx)(E.zG,{className:"text-red-400"})]})}},e.id)),(0,a.jsx)("div",{className:"pt-6",children:(0,a.jsx)(c.z,{type:"submit",disabled:l,className:"w-full bg-blue-600 hover:bg-blue-700 text-white py-3",children:l?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(g.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Processing Results..."]}):n("completeButton","Complete GAD-7 Assessment")})})]})})})]})}):(0,a.jsx)("div",{className:"flex justify-center items-center min-h-[400px]",children:(0,a.jsx)(g.Z,{className:"h-12 w-12 animate-spin text-blue-400"})})}var Z=t(48667),k=t(99102);let D={happy:{icon:"\uD83D\uDE0A",title:"Happy",color:"#4ade80"},sad:{icon:"\uD83D\uDE41",title:"Sad",color:"#60a5fa"},angry:{icon:"\uD83D\uDE20",title:"Angry",color:"#f87171"},fearful:{icon:"\uD83D\uDE28",title:"Anxious",color:"#fbbf24"},disgusted:{icon:"\uD83E\uDD22",title:"Disgusted",color:"#a78bfa"},surprised:{icon:"\uD83D\uDE2E",title:"Surprised",color:"#fbbf24"},neutral:{icon:"\uD83D\uDE10",title:"Neutral",color:"#60a5fa"}};function F(e){var s,t;let{onComplete:n,onNext:i}=e,[l,m]=(0,r.useState)(!1),[u,p]=(0,r.useState)(!1),[h,f]=(0,r.useState)(null),[j,b]=(0,r.useState)({}),[v,N]=(0,r.useState)(0),[w,S]=(0,r.useState)([]),[A,C]=(0,r.useState)(null),[M,E]=(0,r.useState)(120),[I,O]=(0,r.useState)(!1),[P,R]=(0,r.useState)(!1),F=(0,r.useRef)(null),_=(0,r.useRef)(null),L=(0,r.useRef)(null),q=(0,r.useRef)(null),z=async()=>{let e="https://raw.githubusercontent.com/justadudewhohacks/face-api.js/master/weights";try{await Promise.all([faceapi.nets.ssdMobilenetv1.loadFromUri(e),faceapi.nets.faceLandmark68Net.loadFromUri(e),faceapi.nets.faceExpressionNet.loadFromUri(e)]),m(!0)}catch(e){console.error("Model load failed",e)}},T=async()=>{if(!u&&F.current)try{let e=await navigator.mediaDevices.getUserMedia({video:{facingMode:"user"},audio:!1});F.current.srcObject=e,F.current.onloadedmetadata=()=>{var e;null===(e=F.current)||void 0===e||e.play(),p(!0),C(new Date),S([]),E(120),L.current=setInterval(G,2e3),q.current=setInterval(()=>{E(e=>e<=1?(V(),0):e-1)},1e3)}}catch(e){console.error("Camera error:",e),alert("Camera access denied. Please allow camera access and try again.")}},Y=()=>{if(u&&F.current&&(F.current.srcObject.getTracks().forEach(e=>e.stop()),F.current.srcObject=null,p(!1),L.current&&clearInterval(L.current),q.current&&clearInterval(q.current),_.current)){let e=_.current.getContext("2d");null==e||e.clearRect(0,0,_.current.width,_.current.height)}},G=async()=>{if(!F.current||!_.current||F.current.paused||F.current.ended)return;let e=F.current,s=_.current,t={width:e.clientWidth,height:e.clientHeight};faceapi.matchDimensions(s,t);let a=await faceapi.detectAllFaces(e,new faceapi.SsdMobilenetv1Options({minConfidence:.5})).withFaceLandmarks().withFaceExpressions(),r=s.getContext("2d");if(null==r||r.clearRect(0,0,s.width,s.height),a&&a.length>0){let e=faceapi.resizeResults(a,t);faceapi.draw.drawDetections(s,e),faceapi.draw.drawFaceLandmarks(s,e),faceapi.draw.drawFaceExpressions(s,e);let r=e[0];if(r&&r.expressions){let e=Object.entries(r.expressions).sort((e,s)=>s[1]-e[1])[0][0];if(f(e),b(r.expressions),N(r.expressions[e]||0),e&&r.expressions[e]>.3){let s={timestamp:new Date,dominantMood:e,confidence:r.expressions[e],depression:100*(r.expressions.sad||0),anxiety:100*(r.expressions.fearful||0),expressions:r.expressions};S(e=>[...e,s])}}}else f(null),b({}),N(0)},V=async()=>{if(Y(),O(!0),R(!0),0===w.length){alert("No facial expressions detected. Please try again with better lighting."),R(!1);return}try{let e=w.length,s=w.reduce((e,s)=>(e[s.dominantMood]=(e[s.dominantMood]||0)+1,e),{}),t=w.reduce((e,s)=>e+s.depression,0)/e,a=w.reduce((e,s)=>e+s.anxiety,0)/e,r=w.reduce((e,s)=>e+s.confidence,0)/e,l=Object.entries(s).reduce((e,t)=>s[e[0]]>s[t[0]]?e:t)[0];n({dominantMood:l,confidence:r,depression:t,anxiety:a,expressions:j}),setTimeout(()=>{i()},2e3)}catch(e){console.error("Error processing mood analysis:",e),alert("Error processing results. Please try again.")}finally{R(!1)}};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(Z.default,{src:"https://unpkg.com/face-api.js@0.22.2/dist/face-api.min.js",onLoad:()=>z()}),(0,a.jsx)("div",{className:"space-y-6",children:(0,a.jsxs)(o.Zb,{className:"bg-gray-800 border-gray-700",children:[(0,a.jsxs)(o.Ol,{children:[(0,a.jsxs)(o.ll,{className:"flex items-center gap-3 text-white",children:[(0,a.jsx)(x.Z,{className:"w-6 h-6 text-yellow-400"}),"AI-Powered Mood Analysis"]}),(0,a.jsx)(o.SZ,{children:"We'll analyze your facial expressions for 2 minutes to understand your current emotional state."})]}),(0,a.jsxs)(o.aY,{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"relative bg-black rounded-lg overflow-hidden",style:{aspectRatio:"4/3"},children:[(0,a.jsx)("video",{ref:F,autoPlay:!0,muted:!0,playsInline:!0,className:"w-full h-full object-cover"}),(0,a.jsx)("canvas",{ref:_,className:"absolute inset-0 pointer-events-none"}),!u&&!I&&(0,a.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-900/50",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(x.Z,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-400 mb-4",children:"Camera not active"}),(0,a.jsx)(c.z,{onClick:T,disabled:!l,className:"bg-yellow-600 hover:bg-yellow-700",children:l?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(x.Z,{className:"w-4 h-4 mr-2"}),"Start Analysis"]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(g.Z,{className:"w-4 h-4 mr-2 animate-spin"}),"Loading AI Models..."]})})]})}),I&&(0,a.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-900/80",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(y.Z,{className:"w-16 h-16 text-green-400 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-white text-lg font-semibold mb-2",children:"Analysis Complete!"}),(0,a.jsx)("p",{className:"text-gray-300",children:"Processing your results..."})]})})]}),u&&!I&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-sm text-gray-400",children:"Analysis Progress"}),(0,a.jsxs)("span",{className:"text-sm text-gray-400",children:["".concat(Math.floor(M/60),":").concat((M%60).toString().padStart(2,"0"))," remaining"]})]}),(0,a.jsx)(d.E,{value:(120-M)/120*100,className:"h-2"})]}),u&&h&&!I&&(0,a.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,a.jsx)(o.Zb,{className:"bg-gray-700/50 border-gray-600",children:(0,a.jsxs)(o.aY,{className:"p-4 text-center",children:[(0,a.jsx)("div",{className:"text-4xl mb-2",children:null===(s=D[h])||void 0===s?void 0:s.icon}),(0,a.jsx)("h3",{className:"font-semibold text-white mb-1",children:null===(t=D[h])||void 0===t?void 0:t.title}),(0,a.jsxs)("p",{className:"text-sm text-gray-400",children:[(100*v).toFixed(1),"% confidence"]})]})}),(0,a.jsx)(o.Zb,{className:"bg-gray-700/50 border-gray-600",children:(0,a.jsxs)(o.aY,{className:"p-4",children:[(0,a.jsx)("h4",{className:"font-medium text-white mb-3",children:"Live Detection"}),(0,a.jsx)("div",{className:"space-y-2",children:Object.entries(j).sort((e,s)=>s[1]-e[1]).slice(0,3).map(e=>{let[s,t]=e;return(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{className:"capitalize text-gray-300",children:s}),(0,a.jsxs)("span",{className:"text-gray-400",children:[(100*t).toFixed(1),"%"]})]},s)})})]})})]}),u&&!I&&(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsxs)(c.z,{onClick:V,className:"flex-1 bg-green-600 hover:bg-green-700",children:[(0,a.jsx)(y.Z,{className:"w-4 h-4 mr-2"}),"Complete Analysis Early"]}),(0,a.jsxs)(c.z,{onClick:Y,variant:"outline",className:"flex-1",children:[(0,a.jsx)(k.Z,{className:"w-4 h-4 mr-2"}),"Stop Camera"]})]}),!u&&!I&&(0,a.jsxs)("div",{className:"bg-blue-900/20 border border-blue-500/30 rounded-lg p-4",children:[(0,a.jsx)("h4",{className:"font-semibold text-blue-300 mb-2",children:"Instructions:"}),(0,a.jsxs)("ul",{className:"text-sm text-blue-200 space-y-1",children:[(0,a.jsx)("li",{children:"• Ensure good lighting on your face"}),(0,a.jsx)("li",{children:"• Look directly at the camera"}),(0,a.jsx)("li",{children:"• Keep your face visible for 2 minutes"}),(0,a.jsx)("li",{children:"• Try to maintain natural expressions"}),(0,a.jsx)("li",{children:"• The analysis will complete automatically"})]})]})]})]})})]})}var _=t(88906),L=t(11239),q=t(97226),z=t(95805);let T=[{id:"social-1",text:"There is a special person who is around when I am in need"},{id:"social-2",text:"I have a special person who is a real source of comfort to me"},{id:"social-3",text:"My friends really try to help me"}];function Y(e){let{onComplete:s,onNext:t}=e,{t:n,i18n:i}=(0,C.$G)("additional-assessments"),[l,d]=(0,r.useState)(!1),[m,u]=(0,r.useState)(!1),p=(0,r.useMemo)(()=>{if(!m)return[];let e=n("resilience.questions",{returnObjects:!0});return Array.isArray(e)?e:[]},[n,m]),x=(0,r.useMemo)(()=>{if(!m)return[];let e=n("stress.questions",{returnObjects:!0});return Array.isArray(e)?e:[]},[n,m]),y=(0,r.useMemo)(()=>{if(!m)return[];let e=n("sleep.questions",{returnObjects:!0});return Array.isArray(e)?e:[]},[n,m]),f=(0,r.useMemo)(()=>{if(!m)return[];let e=n("social.questions",{returnObjects:!0});return Array.isArray(e)?e:[]},[n,m]),j=(0,r.useMemo)(()=>m?n("resilience.options",{returnObjects:!0}):{},[n,m]),b=(0,r.useMemo)(()=>m?n("stress.options",{returnObjects:!0}):{},[n,m]),v=(0,r.useMemo)(()=>m?n("sleep.options",{returnObjects:!0}):{},[n,m]),N=(0,r.useMemo)(()=>m?n("social.options",{returnObjects:!0}):{},[n,m]);(0,r.useEffect)(()=>{i.isInitialized&&i.hasResourceBundle(i.language,"additional-assessments")&&u(!0)},[i.isInitialized,i.language,i]);let I=(0,r.useMemo)(()=>m&&0!==p.length?A.Ry({...Object.fromEntries(p.map(e=>[e.id,A.Z_().nonempty("Please select an answer.")])),...Object.fromEntries(x.map(e=>[e.id,A.Z_().nonempty("Please select an answer.")])),...Object.fromEntries(y.map(e=>[e.id,A.Z_().nonempty("Please select an answer.")])),...Object.fromEntries(f.map(e=>[e.id,A.Z_().nonempty("Please select an answer.")]))}):A.Ry({}),[m,p,x,y,f]),O=(0,w.cI)({resolver:(0,S.F)(I),defaultValues:{}}),P=e=>{let s=p.map(s=>{let t=parseInt(e[s.id],10),a=s.reverse?6-t:t;return{question:s.text,option:j[e[s.id]],score:a}}),t=s.reduce((e,s)=>e+s.score,0),a=x.map(s=>{let t=parseInt(e[s.id],10),a=s.reverse?4-t:t;return{question:s.text,option:b[e[s.id]],score:a}}),r=a.reduce((e,s)=>e+s.score,0),n=y.map(s=>{let t=parseInt(e[s.id],10);return{question:s.text,option:v[e[s.id]],score:t}}),i=n.reduce((e,s)=>e+s.score,0),l=f.map(s=>{let t=parseInt(e[s.id],10);return{question:s.text,option:N[e[s.id]],score:t}});return{resilience:{score:t,answers:s},stress:{score:r,answers:a},sleep_quality:{score:i,answers:n},social_support:{score:l.reduce((e,s)=>e+s.score,0),answers:l}}},R=async e=>{d(!0);try{let a=P(e);s(a),setTimeout(()=>{t()},1e3)}catch(e){console.error("Error submitting additional assessments:",e)}finally{d(!1)}};return m&&0!==p.length?(0,a.jsx)("div",{className:"space-y-6",children:(0,a.jsxs)(o.Zb,{className:"bg-gray-800 border-gray-700",children:[(0,a.jsxs)(o.Ol,{children:[(0,a.jsxs)(o.ll,{className:"flex items-center gap-3 text-white",children:[(0,a.jsx)(h.Z,{className:"w-6 h-6 text-emerald-400"}),n("title","Additional Wellness Assessments")]}),(0,a.jsx)(o.SZ,{children:n("description","Brief assessments to understand your resilience, stress levels, sleep quality, and social support.")})]}),(0,a.jsx)(o.aY,{children:(0,a.jsx)(E.l0,{...O,children:(0,a.jsxs)("form",{onSubmit:O.handleSubmit(R),className:"space-y-8",children:[(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,a.jsx)(_.Z,{className:"w-5 h-5 text-green-400"}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-white",children:"Brief Resilience Scale"})]}),(0,a.jsx)("p",{className:"text-sm text-gray-400 mb-4",children:"Please indicate how much you agree or disagree with each statement."}),p.map((e,s)=>(0,a.jsx)(E.Wi,{control:O.control,name:e.id,render:t=>{let{field:r}=t;return(0,a.jsxs)(E.xJ,{className:"space-y-3 p-4 rounded-lg border border-gray-600/50 bg-gray-700/20",children:[(0,a.jsxs)(E.lX,{className:"text-sm text-white font-medium",children:[s+1,". ",e.text]}),(0,a.jsx)(E.NI,{children:(0,a.jsx)(M.E,{onValueChange:r.onChange,defaultValue:r.value,className:"grid grid-cols-1 md:grid-cols-5 gap-2",children:Object.entries(j).map(e=>{let[s,t]=e;return(0,a.jsxs)(E.xJ,{className:"flex items-center space-x-2 space-y-0",children:[(0,a.jsx)(E.NI,{children:(0,a.jsx)(M.m,{value:s,id:"".concat(r.name,"-").concat(s),className:"text-green-400 border-gray-500"})}),(0,a.jsx)(E.lX,{htmlFor:"".concat(r.name,"-").concat(s),className:"text-xs text-gray-300 cursor-pointer",children:t})]},s)})})}),(0,a.jsx)(E.zG,{className:"text-red-400"})]})}},e.id))]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,a.jsx)(L.Z,{className:"w-5 h-5 text-red-400"}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-white",children:"Perceived Stress Scale"})]}),(0,a.jsx)("p",{className:"text-sm text-gray-400 mb-4",children:"The questions ask about your feelings and thoughts during the last month."}),x.map((e,s)=>(0,a.jsx)(E.Wi,{control:O.control,name:e.id,render:t=>{let{field:r}=t;return(0,a.jsxs)(E.xJ,{className:"space-y-3 p-4 rounded-lg border border-gray-600/50 bg-gray-700/20",children:[(0,a.jsxs)(E.lX,{className:"text-sm text-white font-medium",children:[s+1,". ",e.text]}),(0,a.jsx)(E.NI,{children:(0,a.jsx)(M.E,{onValueChange:r.onChange,defaultValue:r.value,className:"grid grid-cols-1 md:grid-cols-5 gap-2",children:Object.entries(b).map(e=>{let[s,t]=e;return(0,a.jsxs)(E.xJ,{className:"flex items-center space-x-2 space-y-0",children:[(0,a.jsx)(E.NI,{children:(0,a.jsx)(M.m,{value:s,id:"".concat(r.name,"-").concat(s),className:"text-red-400 border-gray-500"})}),(0,a.jsx)(E.lX,{htmlFor:"".concat(r.name,"-").concat(s),className:"text-xs text-gray-300 cursor-pointer",children:t})]},s)})})}),(0,a.jsx)(E.zG,{className:"text-red-400"})]})}},e.id))]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,a.jsx)(q.Z,{className:"w-5 h-5 text-blue-400"}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-white",children:"Sleep Quality Assessment"})]}),y.map((e,s)=>(0,a.jsx)(E.Wi,{control:O.control,name:e.id,render:t=>{let{field:r}=t;return(0,a.jsxs)(E.xJ,{className:"space-y-3 p-4 rounded-lg border border-gray-600/50 bg-gray-700/20",children:[(0,a.jsxs)(E.lX,{className:"text-sm text-white font-medium",children:[s+1,". ",e.text]}),(0,a.jsx)(E.NI,{children:(0,a.jsx)(M.E,{onValueChange:r.onChange,defaultValue:r.value,className:"grid grid-cols-1 md:grid-cols-4 gap-2",children:Object.entries(v).map(e=>{let[s,t]=e;return(0,a.jsxs)(E.xJ,{className:"flex items-center space-x-2 space-y-0",children:[(0,a.jsx)(E.NI,{children:(0,a.jsx)(M.m,{value:s,id:"".concat(r.name,"-").concat(s),className:"text-blue-400 border-gray-500"})}),(0,a.jsx)(E.lX,{htmlFor:"".concat(r.name,"-").concat(s),className:"text-xs text-gray-300 cursor-pointer",children:t})]},s)})})}),(0,a.jsx)(E.zG,{className:"text-red-400"})]})}},e.id))]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,a.jsx)(z.Z,{className:"w-5 h-5 text-purple-400"}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-white",children:"Social Support Assessment"})]}),T.map((e,s)=>(0,a.jsx)(E.Wi,{control:O.control,name:e.id,render:t=>{let{field:r}=t;return(0,a.jsxs)(E.xJ,{className:"space-y-3 p-4 rounded-lg border border-gray-600/50 bg-gray-700/20",children:[(0,a.jsxs)(E.lX,{className:"text-sm text-white font-medium",children:[s+1,". ",e.text]}),(0,a.jsx)(E.NI,{children:(0,a.jsx)(M.E,{onValueChange:r.onChange,defaultValue:r.value,className:"grid grid-cols-1 md:grid-cols-7 gap-1",children:Object.entries(N).map(e=>{let[s,t]=e;return(0,a.jsxs)(E.xJ,{className:"flex items-center space-x-1 space-y-0",children:[(0,a.jsx)(E.NI,{children:(0,a.jsx)(M.m,{value:s,id:"".concat(r.name,"-").concat(s),className:"text-purple-400 border-gray-500"})}),(0,a.jsx)(E.lX,{htmlFor:"".concat(r.name,"-").concat(s),className:"text-xs text-gray-300 cursor-pointer",children:t})]},s)})})}),(0,a.jsx)(E.zG,{className:"text-red-400"})]})}},e.id))]}),(0,a.jsx)("div",{className:"pt-6",children:(0,a.jsx)(c.z,{type:"submit",disabled:l,className:"w-full bg-emerald-600 hover:bg-emerald-700 text-white py-3",children:l?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(g.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Processing Results..."]}):"Complete Additional Assessments"})})]})})})]})}):(0,a.jsx)("div",{className:"flex justify-center items-center min-h-[400px]",children:(0,a.jsx)(g.Z,{className:"h-12 w-12 animate-spin text-emerald-400"})})}let G=[{id:"introduction",title:"Introduction",icon:m.Z,description:"Welcome and overview"},{id:"phq9",title:"PHQ-9",icon:u.Z,description:"Depression screening"},{id:"gad7",title:"GAD-7",icon:p.Z,description:"Anxiety assessment"},{id:"mood-groove",title:"Mood Analysis",icon:x.Z,description:"Facial emotion detection"},{id:"additional",title:"Additional Tests",icon:h.Z,description:"Resilience, stress, sleep"},{id:"results",title:"Results",icon:y.Z,description:"Your comprehensive report"}];function V(){let e=(0,n.useParams)(),s=(0,n.useRouter)(),t=(0,i.useSession)(),m=e.sessionId,[u,p]=(0,r.useState)(null),[x,h]=(0,r.useState)(!0),[w,S]=(0,r.useState)(0),[A,C]=(0,r.useState)({}),[M,E]=(0,r.useState)(null),[I,P]=(0,r.useState)(!1);(0,r.useEffect)(()=>{var e;if(!(null==t?void 0:null===(e=t.user)||void 0===e?void 0:e.id)){s.push("/login?redirect=/comprehensive-assessment");return}Z()},[t,m]);let Z=async()=>{try{let e=await fetch("http://127.0.0.1:5001/api/comprehensive-assessment/".concat(m));if(e.ok){let s=await e.json();p(s);let t=G.findIndex(e=>e.id===s.session.current_step);S(t>=0?t:0)}else console.error("Failed to fetch assessment data"),alert("Failed to load assessment. Redirecting to start page."),s.push("/comprehensive-assessment")}catch(e){console.error("Error fetching assessment data:",e),alert("Network error. Please check your connection.")}finally{h(!1)}},k=async e=>{try{var s;if((await fetch("http://127.0.0.1:5001/api/comprehensive-assessment/".concat(m,"/step"),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({current_step:e,session_data:{...null==u?void 0:u.session.session_data,steps_completed:[...(null==u?void 0:null===(s=u.session.session_data)||void 0===s?void 0:s.steps_completed)||[],G[w].id]}})})).ok){let s=G.findIndex(s=>s.id===e);S(s),u&&p({...u,session:{...u.session,current_step:e}})}}catch(e){console.error("Error updating step:",e)}},D=()=>{w<G.length-1&&k(G[w+1].id)},_=(e,s)=>{C(t=>({...t,[e]:s}))},L=async()=>{P(!0);try{console.log("Assessment Results:",A);let e=function(e){let s;let{phq9:t,gad7:a,moodGrove:r,additional:n}=e,i=function(e,s,t){let a=[];if(e&&(e.score<=4?a.push(1):e.score<=9?a.push(2):e.score<=14?a.push(3):e.score<=19?a.push(4):a.push(5)),s&&(s.score<=4?a.push(1):s.score<=9?a.push(2):s.score<=14?a.push(3):a.push(4)),t){let e=(t.depression+t.anxiety)/2;e<=20?a.push(1):e<=40?a.push(2):e<=60?a.push(3):a.push(4)}let r=a.reduce((e,s)=>e+s,0)/a.length;return r<=1.5?"Minimal":r<=2.5?"Mild":r<=3.5?"Moderate":r<=4.5?"Moderately Severe":"Severe"}(t,a,r),l=(s=0,(t&&t.score>=15&&s++,a&&a.score>=15&&s++,r&&(r.depression>=60||r.anxiety>=60)&&s++,s>=2)?"High":1===s?"Medium":"Low"),o=function(e,s,t){let{phq9:a,gad7:r,moodGrove:n,additional:i}=e,l=new Date().toLocaleDateString(),o="COMPREHENSIVE MENTAL HEALTH ASSESSMENT RESULTS\n\nAssessment Date: ".concat(l,"\nOverall Severity: ").concat(s,"\nRisk Level: ").concat(t,"\n\n=== DEPRESSION ASSESSMENT (PHQ-9) ===");if(a){o+="\nScore: ".concat(a.score,"/27\nSeverity Level: ").concat(a.severity,"\nInterpretation: "),a.score<=4?o+="Minimal depression symptoms. Your mood appears to be within the normal range.":a.score<=9?o+="Mild depression symptoms detected. Some low mood or loss of interest present but manageable.":a.score<=14?o+="Moderate depression symptoms. These symptoms may be affecting your daily life and relationships.":a.score<=19?o+="Moderately severe depression symptoms. Significant impact on daily functioning likely.":o+="Severe depression symptoms detected. Immediate professional support is strongly recommended.";let e=a.answers.filter(e=>e.score>=2).map(e=>e.question.toLowerCase());e.length>0&&(o+="\nKey Areas of Concern: ".concat(e.slice(0,3).join(", ")))}if(o+="\n\n=== ANXIETY ASSESSMENT (GAD-7) ===",r){o+="\nScore: ".concat(r.score,"/21\nSeverity Level: ").concat(r.severity,"\nInterpretation: "),r.score<=4?o+="Minimal anxiety symptoms. You appear to be managing stress well.":r.score<=9?o+="Mild anxiety symptoms present. Some worry or tension but generally manageable.":r.score<=14?o+="Moderate anxiety symptoms. Worry and tension may be interfering with daily activities.":o+="Severe anxiety symptoms detected. Significant distress and functional impairment likely.";let e=r.answers.filter(e=>e.score>=2).map(e=>e.question.toLowerCase());e.length>0&&(o+="\nPrimary Anxiety Concerns: ".concat(e.slice(0,3).join(", ")))}if(o+="\n\n=== MOOD ANALYSIS (AI-Powered Facial Recognition) ===",n){o+="\nDominant Emotion Detected: ".concat(n.dominantMood.charAt(0).toUpperCase()+n.dominantMood.slice(1),"\nAnalysis Confidence: ").concat((100*n.confidence).toFixed(1),"%\nDepression Indicators: ").concat(n.depression.toFixed(1),"%\nAnxiety Indicators: ").concat(n.anxiety.toFixed(1),"%\n\nFacial Expression Analysis: "),"happy"===n.dominantMood?o+="Positive emotional state detected. Facial expressions suggest good mood and emotional well-being.":"sad"===n.dominantMood?o+="Sadness detected in facial expressions. This aligns with potential depressive symptoms.":"fearful"===n.dominantMood?o+="Anxiety-related expressions detected. Facial analysis suggests heightened stress or worry.":"angry"===n.dominantMood?o+="Irritability or frustration detected. May indicate stress, depression, or anxiety manifestation.":o+="Neutral emotional expression. Facial analysis suggests stable but possibly subdued emotional state.";let e=a?n.depression>40&&a.score>10?"Strong correlation between facial analysis and PHQ-9 results.":n.depression>30||a.score>5?"Moderate correlation between mood analysis and depression screening.":"Facial analysis and PHQ-9 results show minimal correlation.":"",s=r?n.anxiety>40&&r.score>10?"Strong correlation between facial analysis and GAD-7 results.":n.anxiety>30||r.score>5?"Moderate correlation between mood analysis and anxiety screening.":"Facial analysis and GAD-7 results show minimal correlation.":"";e&&(o+="\n".concat(e)),s&&(o+="\n".concat(s))}if(o+="\n\n=== ADDITIONAL WELLNESS FACTORS ===",i){if(i.resilience){let e=i.resilience.score>=25?"High":i.resilience.score>=20?"Moderate":"Low";o+="\nResilience Level: ".concat(e," (Score: ").concat(i.resilience.score,"/30)")}if(i.stress){let e=i.stress.score>=13?"High":i.stress.score>=7?"Moderate":"Low";o+="\nPerceived Stress: ".concat(e," (Score: ").concat(i.stress.score,"/16)")}if(i.sleep_quality){let e=i.sleep_quality.score<=3?"Good":i.sleep_quality.score<=6?"Fair":"Poor";o+="\nSleep Quality: ".concat(e," (Score: ").concat(i.sleep_quality.score,"/9)")}if(i.social_support){let e=i.social_support.score>=18?"Strong":i.social_support.score>=12?"Moderate":"Limited";o+="\nSocial Support: ".concat(e," (Score: ").concat(i.social_support.score,"/21)")}}return o+="\n\n=== COMPREHENSIVE ANALYSIS SUMMARY ===\nOverall Mental Health Status: ".concat(s,"\nRisk Assessment: ").concat(t," Risk\n"),"Minimal"===s?o+="\nYour assessment results indicate good overall mental health with minimal symptoms of depression or anxiety. The various assessment tools show consistent results suggesting emotional stability and effective coping mechanisms.":"Mild"===s?o+="\nYour results suggest mild mental health symptoms that are manageable but worth monitoring. You may be experiencing some stress or mood changes that could benefit from self-care strategies and lifestyle adjustments.":"Moderate"===s?o+="\nYour assessment indicates moderate mental health symptoms that may be impacting your daily life. The combination of depression and anxiety screening results, along with mood analysis, suggests you could benefit from professional support and structured coping strategies.":o+="\nYour results indicate significant mental health symptoms that require attention. Multiple assessment tools show elevated scores suggesting that professional mental health support would be beneficial for your wellbeing and recovery.",o+="\n\n=== PERSONALIZED GUIDANCE REQUEST ===\nBased on these comprehensive results, please provide:\n\n1. **Immediate Coping Strategies**: Specific techniques I can use today to manage my current symptoms, particularly focusing on my ".concat((null==a?void 0:a.severity.toLowerCase())||"detected"," depression levels and ").concat((null==r?void 0:r.severity.toLowerCase())||"detected"," anxiety symptoms.\n\n2. **Lifestyle Recommendations**: Concrete changes to my daily routine that could improve my mental health, considering my ").concat((null==i?void 0:i.sleep_quality)?"sleep quality issues":"sleep patterns"," and ").concat((null==i?void 0:i.stress)?"stress levels":"stress management needs",".\n\n3. **Professional Support Guidance**: Given my ").concat(t.toLowerCase()," risk level and ").concat(s.toLowerCase()," severity, what type of professional help should I consider and when?\n\n4. **Progress Monitoring**: How should I track my mental health going forward, and what warning signs should prompt me to seek immediate help?\n\n5. **Personalized Action Plan**: A step-by-step plan tailored to my specific combination of symptoms and strengths, including my ").concat((null==i?void 0:i.resilience)?"resilience level":"coping abilities"," and ").concat((null==i?void 0:i.social_support)?"social support system":"support network",".\n\nPlease tailor your response specifically to my assessment profile and provide practical, actionable guidance that acknowledges both my challenges and strengths.")}(e,i,l),c=function(e,s){let t=[],{phq9:a,gad7:r,moodGrove:n,additional:i}=e;return"Minimal"===s?(t.push("Continue current wellness practices"),t.push("Maintain regular exercise and sleep schedule"),t.push("Practice preventive mental health strategies")):"Mild"===s?(t.push("Implement daily stress management techniques"),t.push("Consider mindfulness or meditation practice"),t.push("Monitor symptoms weekly")):"Moderate"===s?(t.push("Consider professional counseling or therapy"),t.push("Implement structured self-care routine"),t.push("Reach out to trusted friends or family for support")):(t.push("Seek professional mental health support promptly"),t.push("Consider medication evaluation with healthcare provider"),t.push("Establish crisis support plan")),a&&a.score>=10&&(t.push("Focus on depression-specific coping strategies"),t.push("Engage in behavioral activation techniques")),r&&r.score>=10&&(t.push("Practice anxiety management techniques"),t.push("Learn grounding and breathing exercises")),n&&"sad"===n.dominantMood&&(t.push("Engage in mood-lifting activities"),t.push("Increase social connections and support")),(null==i?void 0:i.sleep_quality)&&i.sleep_quality.score>=6&&(t.push("Improve sleep hygiene practices"),t.push("Consider sleep disorder evaluation")),(null==i?void 0:i.stress)&&i.stress.score>=10&&(t.push("Implement stress reduction techniques"),t.push("Identify and address stress triggers")),(null==i?void 0:i.social_support)&&i.social_support.score<=12&&(t.push("Build stronger social connections"),t.push("Consider joining support groups or communities")),t}(e,i);return{overall_severity:i,risk_level:l,analysis_prompt:o,recommendations:c}}(A);console.log("Generated Analysis:",e),E(e);let s=[];if(A.phq9&&s.push(fetch("http://127.0.0.1:5001/api/comprehensive-assessment/".concat(m,"/phq9"),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(A.phq9)})),A.gad7&&s.push(fetch("http://127.0.0.1:5001/api/comprehensive-assessment/".concat(m,"/gad7"),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(A.gad7)})),A.moodGrove&&s.push(fetch("http://127.0.0.1:5001/api/comprehensive-assessment/".concat(m,"/mood-groove"),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(A.moodGrove)})),A.additional&&s.push(fetch("http://127.0.0.1:5001/api/comprehensive-assessment/".concat(m,"/additional"),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(A.additional)})),await Promise.all(s),(await fetch("http://127.0.0.1:5001/api/comprehensive-assessment/".concat(m,"/complete"),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).ok)S(G.length-1),k("results");else throw Error("Failed to complete assessment")}catch(e){console.error("Error completing assessment:",e),alert("Error completing assessment. Please try again.")}finally{P(!1)}};if(x)return(0,a.jsx)("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-emerald-500 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-300",children:"Loading assessment..."})]})});if(!u)return(0,a.jsx)("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("p",{className:"text-gray-300",children:"Assessment not found"}),(0,a.jsx)(c.z,{onClick:()=>s.push("/comprehensive-assessment"),className:"mt-4",children:"Start New Assessment"})]})});let q=G[w],z=(w+1)/G.length*100;return(0,a.jsx)("div",{className:"min-h-screen bg-gray-900 py-8 px-4",children:(0,a.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,a.jsxs)("div",{className:"text-center mb-8",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-white mb-2",children:"Comprehensive Assessment"}),(0,a.jsxs)("p",{className:"text-gray-400",children:["Session ID: ",m]})]}),(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,a.jsx)("span",{className:"text-sm text-gray-400",children:"Progress"}),(0,a.jsxs)("span",{className:"text-sm text-gray-400",children:[w+1," of ",G.length]})]}),(0,a.jsx)(d.E,{value:z,className:"h-2"})]}),(0,a.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-6 gap-2 mb-8",children:G.map((e,s)=>{let t=e.icon,r=s<w,n=s===w;return(0,a.jsxs)("div",{className:"p-3 rounded-lg text-center transition-all ".concat(r?"bg-emerald-500/20 text-emerald-300":n?"bg-purple-500/20 text-purple-300":"bg-gray-700/50 text-gray-500"),children:[(0,a.jsx)(t,{className:"w-6 h-6 mx-auto mb-1"}),(0,a.jsx)("div",{className:"text-xs font-medium",children:e.title})]},e.id)})}),(0,a.jsx)(l.E.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.3},children:(0,a.jsxs)(o.Zb,{className:"bg-gray-800 border-gray-700 mb-8",children:[(0,a.jsxs)(o.Ol,{children:[(0,a.jsxs)(o.ll,{className:"flex items-center gap-3 text-white",children:[(0,a.jsx)(q.icon,{className:"w-6 h-6 text-emerald-400"}),q.title]}),(0,a.jsx)(o.SZ,{children:q.description})]}),(0,a.jsxs)(o.aY,{className:"space-y-6",children:["introduction"===q.id&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-white",children:"Welcome to Your Comprehensive Assessment"}),(0,a.jsx)("p",{className:"text-gray-300",children:"This assessment will take approximately 15-20 minutes and includes multiple validated tools to provide you with a complete picture of your mental wellness."}),(0,a.jsxs)("div",{className:"bg-blue-900/20 border border-blue-500/30 rounded-lg p-4",children:[(0,a.jsx)("h4",{className:"font-semibold text-blue-300 mb-2",children:"What to Expect:"}),(0,a.jsxs)("ul",{className:"text-sm text-blue-200 space-y-1",children:[(0,a.jsx)("li",{children:"• PHQ-9 Depression Screening (9 questions)"}),(0,a.jsx)("li",{children:"• GAD-7 Anxiety Assessment (7 questions)"}),(0,a.jsx)("li",{children:"• AI-Powered Mood Analysis (2-3 minutes)"}),(0,a.jsx)("li",{children:"• Additional wellness assessments (16 questions)"}),(0,a.jsx)("li",{children:"• Personalized analysis and recommendations"})]})]})]}),"phq9"===q.id&&(0,a.jsx)(O,{onComplete:e=>_("phq9",e),onNext:D}),"gad7"===q.id&&(0,a.jsx)(R,{onComplete:e=>_("gad7",e),onNext:D}),"mood-groove"===q.id&&(0,a.jsx)(F,{onComplete:e=>_("moodGrove",e),onNext:D}),"additional"===q.id&&(0,a.jsx)(Y,{onComplete:e=>{_("additional",e),setTimeout(()=>L(),1e3)},onNext:()=>{}}),"results"===q.id&&(0,a.jsxs)("div",{className:"space-y-6",children:[I&&(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)(g.Z,{className:"w-12 h-12 animate-spin text-emerald-400 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-xl font-semibold text-white mb-2",children:"Generating Your Analysis"}),(0,a.jsx)("p",{className:"text-gray-300",children:"Processing your comprehensive results..."})]}),!I&&M&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(y.Z,{className:"w-16 h-16 text-emerald-400 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-2xl font-bold text-white mb-2",children:"Assessment Complete!"}),(0,a.jsx)("p",{className:"text-gray-300",children:"Your comprehensive mental health analysis is ready."})]}),(0,a.jsxs)("div",{className:"grid md:grid-cols-3 gap-4",children:[(0,a.jsx)(o.Zb,{className:"bg-gray-700/50 border-gray-600",children:(0,a.jsxs)(o.aY,{className:"p-4 text-center",children:[(0,a.jsx)("h4",{className:"font-semibold text-white mb-2",children:"Overall Severity"}),(0,a.jsx)("div",{className:"text-2xl font-bold mb-1 ".concat("Minimal"===M.overall_severity?"text-green-400":"Mild"===M.overall_severity?"text-yellow-400":"Moderate"===M.overall_severity?"text-orange-400":"text-red-400"),children:M.overall_severity})]})}),(0,a.jsx)(o.Zb,{className:"bg-gray-700/50 border-gray-600",children:(0,a.jsxs)(o.aY,{className:"p-4 text-center",children:[(0,a.jsx)("h4",{className:"font-semibold text-white mb-2",children:"Risk Level"}),(0,a.jsx)("div",{className:"text-2xl font-bold mb-1 ".concat("Low"===M.risk_level?"text-green-400":"Medium"===M.risk_level?"text-yellow-400":"text-red-400"),children:M.risk_level})]})}),(0,a.jsx)(o.Zb,{className:"bg-gray-700/50 border-gray-600",children:(0,a.jsxs)(o.aY,{className:"p-4 text-center",children:[(0,a.jsx)("h4",{className:"font-semibold text-white mb-2",children:"Assessments"}),(0,a.jsx)("div",{className:"text-2xl font-bold text-emerald-400 mb-1",children:Object.keys(A).length}),(0,a.jsx)("p",{className:"text-xs text-gray-400",children:"Completed"})]})})]}),(0,a.jsxs)(o.Zb,{className:"bg-gray-800 border-gray-700",children:[(0,a.jsxs)(o.Ol,{children:[(0,a.jsxs)(o.ll,{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-white",children:"Your Personalized Analysis Prompt"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)(c.z,{onClick:()=>{(null==M?void 0:M.analysis_prompt)&&(navigator.clipboard.writeText(M.analysis_prompt),alert("✅ Analysis prompt copied to clipboard! You can now paste it in the chatbot for personalized guidance."))},size:"sm",className:"bg-emerald-600 hover:bg-emerald-700",children:[(0,a.jsx)(f.Z,{className:"w-4 h-4 mr-2"}),"Copy for Chatbot"]}),(0,a.jsxs)(c.z,{onClick:()=>{if(null==M?void 0:M.analysis_prompt){let e=new Blob([M.analysis_prompt],{type:"text/plain"}),s=URL.createObjectURL(e),t=document.createElement("a");t.href=s,t.download="mental-health-analysis-".concat(new Date().toISOString().split("T")[0],".txt"),document.body.appendChild(t),t.click(),document.body.removeChild(t),URL.revokeObjectURL(s)}},size:"sm",variant:"outline",children:[(0,a.jsx)(j.Z,{className:"w-4 h-4 mr-2"}),"Download"]})]})]}),(0,a.jsx)(o.SZ,{children:"Copy this detailed analysis and paste it into our AI chatbot for personalized guidance."})]}),(0,a.jsx)(o.aY,{children:(0,a.jsx)("div",{className:"bg-gray-900 rounded-lg p-4 max-h-96 overflow-y-auto",children:(0,a.jsx)("pre",{className:"text-sm text-gray-300 whitespace-pre-wrap font-mono",children:M.analysis_prompt})})})]}),(0,a.jsx)(o.Zb,{className:"bg-blue-900/20 border-blue-500/30",children:(0,a.jsxs)(o.aY,{className:"p-6",children:[(0,a.jsx)("h4",{className:"font-semibold text-blue-300 mb-4",children:"Next Steps"}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)("div",{className:"w-6 h-6 bg-blue-500 text-white rounded-full flex items-center justify-center text-sm font-bold",children:"1"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-blue-200 font-medium",children:"Copy Your Analysis"}),(0,a.jsx)("p",{className:"text-blue-300 text-sm",children:'Click "Copy for Chatbot" to get your personalized analysis prompt.'})]})]}),(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)("div",{className:"w-6 h-6 bg-blue-500 text-white rounded-full flex items-center justify-center text-sm font-bold",children:"2"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-blue-200 font-medium",children:"Get AI Guidance"}),(0,a.jsx)("p",{className:"text-blue-300 text-sm",children:"Paste your analysis into our AI chatbot for personalized recommendations and support."})]})]}),(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)("div",{className:"w-6 h-6 bg-blue-500 text-white rounded-full flex items-center justify-center text-sm font-bold",children:"3"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-blue-200 font-medium",children:"Track Progress"}),(0,a.jsx)("p",{className:"text-blue-300 text-sm",children:"View your results in the dashboard and retake assessments to monitor progress."})]})]})]})]})})]}),!I&&!M&&(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)(y.Z,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-xl font-semibold text-white mb-2",children:"Complete All Assessments"}),(0,a.jsx)("p",{className:"text-gray-300",children:"Finish all assessment steps to generate your comprehensive analysis."})]})]})]})]})},w),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)(c.z,{onClick:()=>{w>0&&k(G[w-1].id)},disabled:0===w,variant:"outline",className:"flex items-center gap-2",children:[(0,a.jsx)(b.Z,{className:"w-4 h-4"}),"Previous"]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-400",children:[(0,a.jsx)(v.Z,{className:"w-4 h-4"}),"Step ",w+1," of ",G.length]}),w===G.length-1?(0,a.jsxs)(c.z,{onClick:()=>s.push("/dashboard"),className:"bg-emerald-500 hover:bg-emerald-600 flex items-center gap-2",children:["View Dashboard",(0,a.jsx)(N.Z,{className:"w-4 h-4"})]}):(0,a.jsxs)(c.z,{onClick:D,disabled:w>0&&!A[q.id]&&"additional"!==q.id,className:"flex items-center gap-2",children:["Next",(0,a.jsx)(N.Z,{className:"w-4 h-4"})]})]})]})})}},12381:function(e,s,t){"use strict";t.d(s,{d:function(){return o},z:function(){return c}});var a=t(57437),r=t(2265),n=t(37053),i=t(90535),l=t(93448);let o=(0,i.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),c=r.forwardRef((e,s)=>{let{className:t,variant:r,size:i,asChild:c=!1,...d}=e,m=c?n.g7:"button";return(0,a.jsx)(m,{className:(0,l.cn)(o({variant:r,size:i,className:t})),ref:s,...d})});c.displayName="Button"},79820:function(e,s,t){"use strict";t.d(s,{Ol:function(){return l},SZ:function(){return c},Zb:function(){return i},aY:function(){return d},eW:function(){return m},ll:function(){return o}});var a=t(57437),r=t(2265),n=t(93448);let i=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:(0,n.cn)("rounded-xl border bg-card text-card-foreground shadow",t),...r})});i.displayName="Card";let l=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",t),...r})});l.displayName="CardHeader";let o=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:(0,n.cn)("font-semibold leading-none tracking-tight",t),...r})});o.displayName="CardTitle";let c=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:(0,n.cn)("text-sm text-muted-foreground",t),...r})});c.displayName="CardDescription";let d=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:(0,n.cn)("p-6 pt-0",t),...r})});d.displayName="CardContent";let m=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:(0,n.cn)("flex items-center p-6 pt-0",t),...r})});m.displayName="CardFooter"},80670:function(e,s,t){"use strict";t.d(s,{NI:function(){return y},Wi:function(){return m},l0:function(){return c},lX:function(){return h},xJ:function(){return x},zG:function(){return g}});var a=t(57437),r=t(2265),n=t(37053),i=t(29501),l=t(93448),o=t(75060);let c=i.RV,d=r.createContext(null),m=e=>{let{...s}=e;return(0,a.jsx)(d.Provider,{value:{name:s.name},children:(0,a.jsx)(i.Qr,{...s})})},u=()=>{let e=r.useContext(d),s=r.useContext(p),{getFieldState:t,formState:a}=(0,i.Gc)();if(!e)throw Error("useFormField should be used within <FormField>");if(!s)throw Error("useFormField should be used within <FormItem>");let n=t(e.name,a),{id:l}=s;return{id:l,name:e.name,formItemId:"".concat(l,"-form-item"),formDescriptionId:"".concat(l,"-form-item-description"),formMessageId:"".concat(l,"-form-item-message"),...n}},p=r.createContext(null),x=r.forwardRef((e,s)=>{let{className:t,...n}=e,i=r.useId();return(0,a.jsx)(p.Provider,{value:{id:i},children:(0,a.jsx)("div",{ref:s,className:(0,l.cn)("space-y-2",t),...n})})});x.displayName="FormItem";let h=r.forwardRef((e,s)=>{let{className:t,...r}=e,{error:n,formItemId:i}=u();return(0,a.jsx)(o._,{ref:s,className:(0,l.cn)(n&&"text-destructive",t),htmlFor:i,...r})});h.displayName="FormLabel";let y=r.forwardRef((e,s)=>{let{...t}=e,{error:r,formItemId:i,formDescriptionId:l,formMessageId:o}=u();return(0,a.jsx)(n.g7,{ref:s,id:i,"aria-describedby":r?"".concat(l," ").concat(o):"".concat(l),"aria-invalid":!!r,...t})});y.displayName="FormControl",r.forwardRef((e,s)=>{let{className:t,...r}=e,{formDescriptionId:n}=u();return(0,a.jsx)("p",{ref:s,id:n,className:(0,l.cn)("text-[0.8rem] text-muted-foreground",t),...r})}).displayName="FormDescription";let g=r.forwardRef((e,s)=>{var t;let{className:r,children:n,...i}=e,{error:o,formMessageId:c}=u(),d=o?String(null!==(t=null==o?void 0:o.message)&&void 0!==t?t:""):n;return d?(0,a.jsx)("p",{ref:s,id:c,className:(0,l.cn)("text-[0.8rem] font-medium text-destructive",r),...i,children:d}):null});g.displayName="FormMessage"},75060:function(e,s,t){"use strict";t.d(s,{_:function(){return c}});var a=t(57437),r=t(2265),n=t(6394),i=t(90535),l=t(93448);let o=(0,i.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(n.f,{ref:s,className:(0,l.cn)(o(),t),...r})});c.displayName=n.f.displayName},7204:function(e,s,t){"use strict";t.d(s,{E:function(){return l}});var a=t(57437),r=t(2265),n=t(60610),i=t(93448);let l=r.forwardRef((e,s)=>{let{className:t,value:r,...l}=e;return(0,a.jsx)(n.fC,{ref:s,className:(0,i.cn)("relative h-2 w-full overflow-hidden rounded-full bg-primary/20",t),...l,children:(0,a.jsx)(n.z$,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:"translateX(-".concat(100-(r||0),"%)")}})})});l.displayName=n.fC.displayName},86700:function(e,s,t){"use strict";t.d(s,{E:function(){return o},m:function(){return c}});var a=t(57437),r=t(2265),n=t(42325),i=t(40519),l=t(93448);let o=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(n.fC,{className:(0,l.cn)("grid gap-2",t),...r,ref:s})});o.displayName=n.fC.displayName;let c=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(n.ck,{ref:s,className:(0,l.cn)("aspect-square h-4 w-4 rounded-full border border-primary text-primary shadow focus:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",t),...r,children:(0,a.jsx)(n.z$,{className:"flex items-center justify-center",children:(0,a.jsx)(i.Z,{className:"h-3.5 w-3.5 fill-primary"})})})});c.displayName=n.ck.displayName},93448:function(e,s,t){"use strict";t.d(s,{cn:function(){return n}});var a=t(61994),r=t(53335);function n(){for(var e=arguments.length,s=Array(e),t=0;t<e;t++)s[t]=arguments[t];return(0,r.m6)((0,a.W)(s))}}},function(e){e.O(0,[5569,9452,7506,4169,4606,2247,1121,2971,2117,1744],function(){return e(e.s=23324)}),_N_E=e.O()}]);